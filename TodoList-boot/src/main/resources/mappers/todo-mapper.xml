<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="edu.kh.todo.model.mapper.TodoMapper"> <!-- 인터페이스와 연결 -->
    <!--  "Mapper 인터페이스 경로 작성(필수)" -->
    
	<!-- 아래 태그는 mapper.xml 파일 만들자 마자 삭제!! -->
  	<!-- <cache-ref namespace=""/> -->
  	
  	<!-- 
  		연결된 인터페이스의 selectAll 메서드와 연결됨
  		-> 연결된 메서드 호출 시 연결된 SQL실행 
  	 -->
  	 
  	 <!-- 
  	 	select 태그 속성
  	 	- id 속성 : 태그를 식별하는 값(연결된 메서드명과 동일하게 작성해서 연결)
  	 	
  	 	- resulType : 조회 결과의 한 줄(1행)을 저장하여 반환할 변수|객체의 자료형 지정 
  	 	
  	 	(필드명 == 컬럼명 인 경우 조회 결과가 자동으로 필드에 세팅)
  	 	(필드명과 컬럼명이 같아지는 속성을 mybatis-config.xml에 저장함)
  	 	(조회 결과가 여러 행이면 행 별로 변수/객체 자료형으로 저장 후 모아서 List로 반환)
  	  -->
  	 
  	<select id="selectAll" resultType="edu.kh.todo.model.dto.Todo">
  		SELECT TODO_NO, TODO_TITLE, COMPLETE,
  			   TO_CHAR(REG_DATE, 'YYYY-MM-DD HH24:MI:SS')REG_DATE
  		FROM TB_TODO
  		ORDER BY TODO_NO
  	</select>


	<!-- 완료된 할 일 개수 조회 -->
	
	<!-- Java int type의 별칭은 _int -->
	<select id="getCompleteCount" resultType="_int">
		SELECT COUNT(*)
		FROM TB_TODO
		WHERE COMPLETE = 'Y'
	</select>
  	
</mapper>
